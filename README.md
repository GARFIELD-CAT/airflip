# airflip

## Описание

Веб-приложение для децентрализованного обмена токенов на EVM-сетях с поддержкой crosschain

## Технологии

### Backend

- Python 3.12 — основной язык программирования.
- PostgreSQL 13.3 - база данных приложения
- Redis - для кеширования запросов
- FastAPI — фреймворк для создания асинхронных веб-эндпоинтов.
- Pydantic — модуль для валидации данных и работы с моделями.
- SQLAlchemy — ORM для работы с базой данных.
- Pytest — фреймворк для написания тестов.
- Docker — платформа для контейнеризации приложений.
- Docker Compose — инструмент для управления многоконтейнерными приложениями.
- Uvicorn — ASGI сервер для запуска приложения FastAPI.
- Alembic — инструмент для управления миграциями базы данных.

### Frontend

- TypeScript — основной язык программирования для типизированной разработки.
- React 18 — библиотека для создания пользовательских интерфейсов.
- Vite — современный инструмент сборки и разработки.
- Tailwind CSS — CSS-фреймворк для быстрой стилизации.
- React Router — библиотека для маршрутизации в React приложениях.
- Zustand — легковесная библиотека для управления состоянием.
- TanStack Query — библиотека для управления серверным состоянием и кэшированием.
- Wagmi — React хуки для Ethereum.
- Viem — TypeScript интерфейс для Ethereum.
- Reown AppKit — библиотека для подключения кошельков.
- Framer Motion — библиотека для анимаций.
- React Hook Form — библиотека для работы с формами.
- React Beautiful DND — библиотека для drag-and-drop интерфейсов.
- Vitest — фреймворк для тестирования.
- React Testing Library — библиотека для тестирования React компонентов с фокусом на пользовательский опыт.

## Функциональность

### Drag & Drop токенов в портфолио

Приложение поддерживает перетаскивание токенов в портфолио для изменения их порядка отображения:

- Нажмите и удерживайте иконку перетаскивания (⋮⋮) рядом с токеном
- Перетащите токен в желаемое место в списке
- Отпустите для фиксации нового порядка
- Порядок автоматически сохраняется в localStorage браузера

## Запуск проекта локально

### Backend

- Склонируйте репозиторий `git clone https://github.com/GARFIELD-CAT/airflip.git`
- Перейдите в папку проекта `airflip`
- Перейдите в папку `config`
- Создайте файлы .env в папках `pg_database` и `backend` с данными переменных окружения на основе шаблонов .env_prod_example. 
  - Сейчас достаточно просто убрать "_prod_example"
- Запустите docker контейнер `docker-compose up` для разворачивания сервиса
- Можно работать с API

### Frontend

- Склонируйте репозиторий `git clone https://github.com/GARFIELD-CAT/airflip.git`
- Перейдите в папку проекта `airflip/frontend`
- Убедитесь, что у вас установлен Node.js версии 18 или выше
- Установите зависимости `yarn install`
- Запустите проект в режиме разработки `yarn dev`
- Приложение будет доступно по адресу http://localhost:5173

#### Тестовые токены

Для тестирования функционала свапа и других операций с токенами обратитесь к Миронову Эрнесту или другому участнику проекта для получения токенов.

#### Альтернативный запуск через Docker

- Перейдите в папку `frontend`
- Запустите контейнер `docker-compose up --build -d`
- Приложение будет доступно по адресу http://localhost:3000

## Работа с API

-  Документация по работе с API расположена по адресу http://localhost/api/openapi

## Запуск тестов

### Backend

- Перейдите в папку проекта `airflip`
- Перейдите в папку `backend`
- Разверните venv окружение `py -3.12 -m venv venv`
- Активировать venv окружение `.\venv\Scripts\activate.bat`
  - Если используется PowerShell `.\venv\Scripts\Activate.ps1`
  - Если используете bash: `source ./venv/Scripts/activate`
- Установить poetry `pip install poetry`
- Установить зависимости `poetry install`
- Перейдите в папку `config`
- Создайте файлы .env в папках `pg_database` и `backend` с данными переменных окружения на основе шаблонов .env_prod_example. 
  - Сейчас достаточно просто убрать "_prod_example"
- Перейдите в папку проекта `airflip`
- Запустите docker контейнер `docker-compose up` для разворачивания сервиса
- После запуска сервиса перейдите в другое окно терминала
- Перейдите в папку `config\backend`
- Скопируйте значения ключей из `.env_test_example` и вставьте их в `.env`
  - Это нужно, чтобы тесты коннектились к базе.
- Перейдите в папку `backend`
- Активировать venv окружение по инструкции выше
- Запустите тесты командой `pytest -v .`

### Frontend

- Перейдите в папку проекта `airflip/frontend`
- Убедитесь, что зависимости установлены `yarn install`
- Запустите тесты командой `yarn test`
- Для запуска тестов с UI интерфейсом `yarn test:ui`
- Для запуска тестов с покрытием кода `yarn test:coverage`

## Авторы

- backend: Ягунов Денис
- frontend: Миронов Эрнест
- дизайн: Самелюк Юрий
